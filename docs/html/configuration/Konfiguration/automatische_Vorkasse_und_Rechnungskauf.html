<!DOCTYPE html>
<html class="no-js" lang="de">
<head>
    <title>Automatische Vorkasse und Rechnungskauf (nur Legacy Payments / NGW)) -  unzer</title>
        <meta name="description" content="">
    <meta name="author" content="D³ Data Development">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="icon" href="../../themes/d3/img/favicon.png" type="image/x-icon">

    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    
    <!-- CSS -->
    <link href='../../themes/d3/css/theme-blue.min.css' rel='stylesheet' type='text/css'><link href='../../themes/d3/css/d3.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="../../themes/d3/js/html5shiv-3.7.3.min.js"></script>
    <![endif]-->
</head>
<body class=" ">
<div class="Columns content">
    <aside class="Columns__left Collapsible">
        <button type="button" class="Button Collapsible__trigger">
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
        </button>

        <a class="Brand" href="../../index.html"><i class='fab fa-d3 d3fa-color-blue'></i> unzer</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451">
            <path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/>
        </svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Suchen..." autocomplete="on"
               results=25 autosave=text_search>
    </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item Nav__item--open has-children'><a href="../../configuration/Konfiguration/Konfiguration_der_Zahlungsarten.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Konfiguration</a><ul class='Nav'><li class='Nav__item '><a href="../../configuration/Konfiguration/Konfiguration_der_Zahlungsarten.html">Konfiguration der Zahlungsarten</a></li><li class='Nav__item Nav__item--active'><a href="../../configuration/Konfiguration/automatische_Vorkasse_und_Rechnungskauf.html">Automatische Vorkasse und Rechnungskauf (nur Legacy Payments / NGW))</a></li><li class='Nav__item  has-children'><a href="../../configuration/Konfiguration/Cronjob_einrichten/Cronjob_per_Konsole_einrichten.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Cronjob einrichten</a><ul class='Nav'><li class='Nav__item '><a href="../../configuration/Konfiguration/Cronjob_einrichten/Cronjob_per_Konsole_einrichten.html">Cronjob per Konsole einrichten (nur Legacy Payments / NGW)</a></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Cronjob_einrichten/Cronjob_per_Webaufruf_einrichten.html">Cronjob per Webaufruf einrichten (nur Legacy Payments / NGW)</a></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Cronjob_einrichten/Zahlungseingaenge_bei_Heidelpay_erneut_abrufen.html">Zahlungseingänge bei Unzer erneut abrufen (nur Legacy Payments / NGW)</a></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Cronjob_einrichten/OXID_eShop_Enterprise_Edition.html">OXID eShop Enterprise Edition (nur Legacy Payments / NGW)</a></li></ul></li><li class='Nav__item  has-children'><a href="../../configuration/Konfiguration/Informationen_und_Anleitung_von_iDeal_und_Przelewy24/Was_hat_sich_im_Bestellprozess_geaendert.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Informationen und Anleitung von iDeal und Przelewy24</a><ul class='Nav'><li class='Nav__item '><a href="../../configuration/Konfiguration/Informationen_und_Anleitung_von_iDeal_und_Przelewy24/Was_hat_sich_im_Bestellprozess_geaendert.html">Was hat sich im Bestellprozess geändert? (nur Legacy Payments / NGW)</a></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Informationen_und_Anleitung_von_iDeal_und_Przelewy24/Was_macht_der_Cronjob.html">Was macht der Cronjob? (nur Legacy Payments / NGW)</a></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Informationen_und_Anleitung_von_iDeal_und_Przelewy24/Was_passiert_bei_einem_Refund.html">Was passiert bei einem Refund? (nur Legacy Payments / NGW)</a></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Informationen_und_Anleitung_von_iDeal_und_Przelewy24/Wie_ist_der_Cronjob_einzurichten.html">Wie ist der Cronjob einzurichten? (nur Legacy Payments / NGW)</a></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Informationen_und_Anleitung_von_iDeal_und_Przelewy24/Was_ist_noch_zu_beachten.html">Was ist noch zu beachten? (nur Legacy Payments / NGW)</a></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Informationen_und_Anleitung_von_iDeal_und_Przelewy24/Infos_fuer_Entwickler.html">Infos für Entwickler (nur Legacy Payments / NGW)</a></li></ul></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Zahlungsinformationen_fuer_Rechnungskauf_und_Vorkasse_anzeigen_lassen.html">Zahlungsinformationen für Rechnungskauf und Vorkasse anzeigen lassen</a></li><li class='Nav__item '><a href="../../configuration/Konfiguration/Webhooks.html">Webhooks</a></li></ul></li><li class='Nav__item  has-children'><a href="../../configuration/Schnittstellenwechsel/Start.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Schnittstellenwechsel</a><ul class='Nav'><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Start.html">Schnittstellenwechsel</a></li><li class='Nav__item  has-children'><a href="../../configuration/Schnittstellenwechsel/Vorbereitung/was_wird_benoetigt.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Vorbereitung</a><ul class='Nav'><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Vorbereitung/was_wird_benoetigt.html">Was benötigen Sie?</a></li><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Vorbereitung/Unzer_Insights.html">Zugangsdaten für das Unzer Insights</a></li><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Vorbereitung/Schluesselpaare_finden.html">Schlüsselpaare finden</a></li><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Vorbereitung/Zahlarten.html">Welche Zahlungsarten führt Unzer unter PaymentApi / MGW?</a></li><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Vorbereitung/Sicherung.html">Datensicherung anlegen</a></li></ul></li><li class='Nav__item  has-children'><a href="../../configuration/Schnittstellenwechsel/Konfiguration/Schluesselpaar_eintragen.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Konfiguration</a><ul class='Nav'><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Konfiguration/Schluesselpaar_eintragen.html">Notierte Schlüsselpaare eintragen</a></li><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Konfiguration/Channeleinstellungen.html">Channeleinstellungen</a></li><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Konfiguration/Channelzuordnungen.html">Zahlartenzuordungen</a></li></ul></li><li class='Nav__item '><a href="../../configuration/Schnittstellenwechsel/Nacharbeiten.html">Überprüfung und Freischaltung</a></li></ul></li></ul>
            <div class='versionselector'>Version wechseln: 
<select onchange="window.location.href=this.options[this.selectedIndex].value" size="1">

<?php
    $versionpath = implode("/", array_slice(explode("/", $_SERVER['SCRIPT_NAME']), 2));
    $modulepath = implode("/", array_slice(explode("/", $_SERVER['SCRIPT_NAME']), 0, 2));
    $path = str_replace($versionpath, "", $_SERVER['SCRIPT_FILENAME']);
    $paths = explode('/', $versionpath);
    $currpath = $paths[0];
    
    $dirs = array_filter(glob($path . '/*'), 'is_dir');
    arsort($dirs);

    foreach ($dirs as $dir) {
        $dir = str_replace($path.'/', '', $dir);
        $selected = ($dir === $currpath) ? 'selected="selected"' : "";
        echo '<option value="'. $modulepath .'/'. $dir .'" '. $selected .'>'. $dir .'</option>';
    }
?>
</select></div>


            <div class="Links">
                <hr/>
                <a href="https://www.oxidmodule.com" target="_blank">Shop</a><br />
                <a href="https://blog.oxidmodule.com" target="_blank">Blog</a><br />
                <a href="https://faq.d3data.de" target="_blank">FAQ</a><br />
                <a href="https://docs.oxidmodule.com" target="_blank">Dokumentationen</a><br />
                <a href="https://support.oxidmodule.com" target="_blank">D³ Support Center</a><br />
                <a href="https://www.oxidmodule.com/kontakt" target="_blank">Kontakt</a><br />
                <a href="https://www.oxidmodule.com/impressum" target="_blank">Impressum</a><br />
                            </div>

            
                
                        </div>
    </aside>
    <div class="Columns__right Columns__right--full">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../../configuration/Konfiguration/Konfiguration_der_Zahlungsarten.html">Konfiguration</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../../configuration/Konfiguration/automatische_Vorkasse_und_Rechnungskauf.html">Automatische Vorkasse und Rechnungskauf (nur Legacy Payments / NGW))</a></h1>
                <span class="ModifiedDate">
                        19.04.2024        </span>
                    </div>

    <div class="s-content">
        <blockquote class="alert alert-warning">
<i class='fas fa-exclamation-triangle'></i> <p> Sofern Sie die Zahlungsart &quot;automatische Vorkasse&quot; oder &quot;Rechnungskauf&quot; über Unzer NICHT nutzen, können Sie auf die nächste Seite blättern.</p>
</blockquote>
<h2 id="page_Ablauf-bei-automatische-Vorkasse-und-Rechnungskauf">Ablauf bei &quot;automatische Vorkasse&quot; und &quot;Rechnungskauf&quot;</h2>
<p>Eine &quot;Vorkasse&quot;- bzw. &quot;Rechnungskauf&quot;-Bestellung wird zum Zeitpunkt der Bestellung das Feld <code>Interner Status</code> <em>&quot;oxtransstatus&quot;</em> auf <code>PENDING</code> gestellt.</p>
<p>Bei Nutzung dieser Zahltypen prüft der Cronjob auf vorhandene Zahlungseingänge bei Unzer.</p>
<p>Werden vorhandene Zahlungseingänge an den Shop übermittelt, so werden diese mit den gespeicherten Bestellungen abgeglichen.</p>
<p>Wird eine korrekte Zahlung ermittelt, so wird <code>Interner Status</code> <em>&quot;oxtransstatus&quot;</em> auf <code>OK</code> geändert, sowie das Feld <code>Bezahlt am</code> <em>&quot;oxpaid&quot;</em> mit dem Zeitpunkt (Datum &amp; Uhrzeit) der Bezahlung gefüllt.</p>
<p>Weiterhin wird an den Kunden und den Shopinhaber, eine Informations-E-Mail über den Erhalt der Zahlung geschickt.</p>
<p>Für die Formatierung der Mails stehen E-Mail-Templates zur Verfügung unter<br> <code>/modules/d3/heidelpay/views/tpl/email/*</code>.</p>
<p>Den E-Mail-Inhalt liefern CMS-Texte, die mit dem Modul installiert wurden.<br>
Diese finden Sie im Admin unter <span class="navi_element">Kundeninformationen</span> / <span class="navi_element">CMS-Seiten</span> beginnend mit <br>
dem Ident <em>&quot;d3_hp_vorkassemail&quot;</em> und <br>
dem Titel <em>&quot;Heidelpay Vorkasseinfomail&quot;</em>.
<br></p>
<blockquote>
<p><strong>Hinweis:</strong>
Sollte die Höhe der Zahlung von dem Bestellwert abweichen, werden folgende Schritte durchgeführt:</p>
<ul>
<li>Der <em>&quot;Interner Status&quot;</em> (oxtransstatus) der Bestellung wird auf <em>&quot;ERROR&quot;</em> gestellt und das Feld <em>&quot;Bezahlt am&quot;</em> (oxpaid) bleibt unverändert.</li>
<li>Weiterhin werden E-Mails an Kunde und Shopinhaber gesandt, die auf die fehlerhafte Zahlung hinweisen.</li>
</ul>
</blockquote>
<h2 id="page_Einrichtung-eines-Cronjob">Einrichtung eines Cronjob</h2>
<p>Für die Zahlungsarten &quot;automatische Vorkasse&quot; und &quot;Rechnungskauf&quot; ist ein Cronjob einzurichten.<br>
Dieser sorgt dafür, dass täglich mehrmals ein Abgleich eingegangener Zahlungen zwischen Shop und Unzer erfolgt.<br>
Wir empfehlen das Starten des Jobs 2-3x pro Tag. z.B. vormittags, nachmittags und abends.<br>
Weitere Informationen zum Anlegen von Cronjobs finden Sie in unserer <a href="https://faq.d3data.de/begriffslexikon/cronjob/" class="Link--external">https://faq.d3data.de/begriffslexikon/cronjob/</a>.</p>
<p>##Wichtiger Sicherheitshinweis
Verhindern Sie den Aufruf von .sh-Dateien via Browser.
Erweitern Sie z.B. die &quot;.htaccess&quot;-Datei des Shops um folgende Zeilen:</p>
<pre><code class="language-apacheconfig">&lt;Files *.sh&gt;
    &lt;IfModule mod_authz_core.c&gt;
        # htaccess - apache 2.4
        Require all denied
    &lt;/IfModule&gt;
    &lt;IfModule !mod_authz_core.c&gt;
        Order allow,deny
        Deny from all
        Satisfy All
    &lt;/IfModule&gt;
&lt;/Files&gt;
</code></pre>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../../configuration/Konfiguration/Konfiguration_der_Zahlungsarten.html">Zurück</a></li>            <li class=Pager--next><a href="../../configuration/Konfiguration/Cronjob_einrichten/Cronjob_per_Konsole_einrichten.html">Weiter</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>


<!-- JS -->
<script src="../../themes/d3/js/jquery-1.11.3.min.js"></script><script src="../../themes/d3/js/highlight.pack.js"></script><script src="../../themes/d3/js/daux.js"></script><script src="../../themes/d3/js/fontawesome-all.js"></script>
    <!-- Tipue Search -->
    <script type="text/javascript" src="../../tipuesearch/tipuesearch.js"></script>

    <script>
        window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
        $(function() {
            tipuesearch({
                'base_url': '../../'
            });
        });
    </script>

</body>
</html>
